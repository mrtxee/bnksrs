# План разработки

1. Делаю ядро системы, которая умеет хранить данные и отвечать на rest-запросы
2. Добавляю тесты согласно ТЗ
3. Разбиваю ядро на микросервисы `AccountInfoService`, `BankingService`
4. Настраиваю взаимодействие между сервисами при помощи `Kafka`
5. При помощи Сереги делаем оценку, похож ли код на то что будет круто смотреться на собесе
6. ? Деплой при помощи Docker контейнеров
    1. В том случае, если это демонстрабельно на собесе

## AccountInfoService

### База данных

- таблица `clients`
    - ID autoincremental
    - name
    - familyname
    - fathername
    - iddoc_type ENUM(PASSPORT_RU, PASSPORT_KZ, PASSPORT_INERNATIONAL)
    - iddoc_number varchar
    - iddoc_payload varchar
- таблица `account`
    - ID
    - clientID :: clients.ID
    - client_fullname :: CONCAT(client.name,” ”,client.name2,” ”,client.name3)
    - accountID
    - currency ENUM(RUR, USD, EUR)
    - amount long
    - decimal_factor byte
    - status ENUM(active, locked)

### Rest API

1. зарегистрировать клиента `HTTP POST /client/`
2. зарегистрировать счет для клиента `HTTP POST /account/`
    1. номер счета accountID генерируется автоматически: “4003”+<8 рандомных цифр>
3. узнать остаток на счете `HTTP GET /account/<accountID:int>/`
4. получить данные о клиенте `HTTP GET /client/<ID:int>/`
    1. вернуть пользователя и список его счетов

## BankingService

### Rest API

1. перевод суммы `HTTP POST /transaction/`
    1. проверки:
        1. не заблокированы счета
        2. совпадают валюты счетов
        3. достаточный свободный остаток

### База данных

- таблица `transations`
    - ID autoincremental
    - timestamp — autogenereted by DB
    - payee
    - recipient
    - amount long
    - decimal_factor byte
    - payload
	
# Задача

Написать систему хранения балансов пользователей и перевода денег со счета на счет. Просто RestAPI

## Требования

- В API нужны методы:
    - заведения новых аккаунтов
    - проверки их балансов
    - главное transfer со счета на счет
        
        
- приправь это валидациями входных данных
- главное не допустить ошибок при переводе со счета на счет, чтобы небыло такого что деньги списались но не дошли и наоборот
- это должно работать в многопоточном режиме, когда много пользователей условно одновременно делают переводы
- тесты
    - обязательно написать базовые тесты
    - отдельно тест на большую загрузку когда много пользователей делает конфликтующие операции одновременно
    - завести среди пользователей какой-то один или несколько бизнес аккаунтов, которые будут отличаться от обычных лишь тем, что на них чаще других будут отправлять деньги

### Рекомендованный стек технологий

- Опыт разработки на JAVA 8;
- Знание и опыт разработки на Spring Framework;
- Знание и практический опыт применения Kubernetes, Docker;
- Хорошее представление об основных подходах к проектированию микросервисов;
- Знание и практический опыт применения высоконагруженных сервисов с использованием Apache Kafka / RabbitMQ;
- Опыт написания тестов (JUNIT5, интеграционные);
- Уверенное знание баз данных PostgreSQL/Oracle/MS SQL Server на уровне разработки и оптимизации процедур.